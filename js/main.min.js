function getPreferences(){var e={};switch(e.retina=$("#retinaValue").val(),e.maxWidth=$("#maxWidth").val()*e.retina,e.maxHeight=$("#maxHeight").val()*e.retina,e.numberShapes=$("#numberShapes").val(),e.numberColors=$("#numberColors").val(),e.allowRotation=$("#allowRotation").prop("checked"),e.persistentAngle=$("#persistentAngle").prop("checked"),e.allowPerpendicular=$("#allowPerpendicular").prop("checked"),e.allowTransparency=$("#allowTransparency").prop("checked"),e.allowRoundCorners=$("#allowRoundCorners").prop("checked"),e.objectSize=$("#objectSize").val(),e.useBackgroundColor=$("#useBackgroundColor").prop("checked"),e.backgroundColor=$("#backgroundColor").val(),e.useColorSet=$("#useColorSet").prop("checked"),e.colorSet=$("#colorSet").val(),e.fillingtype=$("#fillingtype").val(),e.allowDistictColors=$("#allowDistict").val(),e.objectSize){case"xl":e.objectSize=1;break;case"l":e.objectSize=.5;break;case"m":e.objectSize=.25;break;case"s":e.objectSize=.1;break;case"xs":e.objectSize=.05}return e.allowedShapes=$("#allowedShapes:checked").map(function(){return $(this).val()}).toArray(),e.useColorSet?e.allowedColors=e.colorSet.split(","):e.allowedColors=generateColorArray(e.numberColors),e}function resizeArtboard(e,r){maxArtboardPosX=e,maxArtboardPosY=r,paper.setSize(maxArtboardPosX,maxArtboardPosY)}function drawBackground(){var e=1,r=preferences.useBackgroundColor?preferences.backgroundColor:getColor(),a=paper.rect(0,0,preferences.maxWidth,preferences.maxHeight).attr({fill:r,"stroke-width":0})}function generateShapes(e){paper.clear(),drawBackground();var r="rectangle";for(globalAngle=parseInt(getRandomArbitrary(0,360)),i=1;i<=e;i++)r=preferences.allowedShapes[Math.floor(Math.random()*preferences.allowedShapes.length)],"circle"==r?drawCircle():"triangle"==r?drawTriangle():"polygon"==r?drawPolygon():"line"==r?drawLine():drawRectangle()}function getRandomColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function getRandomArbitrary(e,r,a){var o=Math.random()*(r-e)+e;return null!=a&&(o*=Math.random()<.5?-1:1),o}function drawRectangle(){var e=getRandomArbitrary(-.5*maxArtboardPosX,maxArtboardPosX+10),r=getRandomArbitrary(-.5*maxArtboardPosY,maxArtboardPosY+10),a=getRandomArbitrary(0,preferences.maxWidth),o=getRandomArbitrary(0,preferences.maxHeight),t=0,n=0,s=0,l=1,i=1,c,d;c=getColor(),d=getColor(),preferences.allowRoundCorners&&(n=getRandomArbitrary(0,a>o?a:o)),preferences.allowTransparency&&(l=getRandomArbitrary(.25,1)),"random"==preferences.fillingtype?(i=getRandomArbitrary(.25,1),s=getRandomArbitrary(1,5)):"none"==preferences.fillingtype?(i=getRandomArbitrary(.25,1),s=getRandomArbitrary(1,5),l=0):(s=0,i=0),preferences.allowDistictColors||(d=c);var p=paper.rect(e,r,a,o).attr({"stroke-width":s,stroke:d,"stroke-opacity":i,fill:c,"fill-opacity":l,radius:n});preferences.allowRotation&&randomAllow?(t=preferences.persistentAngle?globalAngle:getRandomArbitrary(0,360),p=p.transform("r"+t+" s"+preferences.objectSize)):p.transform("s"+preferences.objectSize)}function drawCircle(){var e=getRandomArbitrary(0,maxArtboardPosX,!0),r=getRandomArbitrary(0,maxArtboardPosY,!0),a=getRandomArbitrary(0,preferences.maxWidth),o=0,t=1,n=1,s,l;s=getColor(),l=getColor(),preferences.allowTransparency&&(t=getRandomArbitrary(.25,1)),"random"==preferences.fillingtype?(n=getRandomArbitrary(.25,1),o=getRandomArbitrary(1,5)):"none"==preferences.fillingtype?(n=getRandomArbitrary(.25,1),o=getRandomArbitrary(1,5),t=0):(o=0,n=0),preferences.allowDistictColors||(l=s);var i=paper.circle(e,r,a).attr({"stroke-width":o,stroke:l,"stroke-opacity":n,fill:s,"fill-opacity":t});i.transform("s"+preferences.objectSize)}function drawPolygon(e){var r,a,o,t,n=0,s=1,l=1,i,c;for(i=getColor(),c=getColor(),null==e&&(e=parseInt(getRandomArbitrary(3,5))),x1=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosX,!0),y1=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosY,!0),firstPoint=parseInt(x1)+","+parseInt(y1),t="M "+firstPoint,j=0;j<e;j++)r=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosX,!0),a=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosY,!0),o=parseInt(r)+","+parseInt(a),t+=" L "+o;t+=" L "+firstPoint,preferences.allowTransparency&&(s=getRandomArbitrary(.25,1)),"random"==preferences.fillingtype?(l=getRandomArbitrary(.25,1),n=getRandomArbitrary(1,1)):"none"==preferences.fillingtype?(l=getRandomArbitrary(.25,1),n=getRandomArbitrary(1,1),s=0):(n=0,l=0),preferences.allowDistictColors||(c=i);var d=paper.path(t).attr({"stroke-width":n,stroke:c,"stroke-opacity":l,fill:i,"fill-opacity":s});d.transform("s"+preferences.objectSize/2)}function drawTriangle(){var e,r,a,o,t,n,s,l;if(s=getRandomArbitrary(0,preferences.maxWidth)*preferences.objectSize,l=getRandomArbitrary(0,preferences.maxHeight)*preferences.objectSize,e=getRandomArbitrary(0,maxArtboardPosX),a=getRandomArbitrary(0,maxArtboardPosY),t=getRandomArbitrary(10,s>l?s:l),r=e+t,triangleString="M "+parseInt(e)+","+parseInt(a)+"L "+parseInt(r)+","+parseInt(a)+"L "+parseInt(e+t/2)+","+parseInt(a+t/1.5),preferences.allowTransparency)var i=getRandomArbitrary(.25,1);console.log("triangle: "+triangleString);var c=paper.path(triangleString).attr({fill:getColor(),"stroke-width":0,"fill-opacity":i});preferences.persistentAngle?c.transform("r"+globalAngle):preferences.allowRotation?c.transform("r"+parseInt(getRandomArbitrary(0,360))):(angle=45*parseInt(getRandomArbitrary(0,6)),c.transform("r"+angle))}function drawLine(){var e,r,a,o,t,n,s,l=1,s=0;if(s=preferences.persistentAngle&&0!=globalAngle?globalAngle:parseInt(getRandomArbitrary(0,360)),e=maxArtboardPosX>maxArtboardPosY?maxArtboardPosX:maxArtboardPosY,r=getRandomArbitrary(0,maxArtboardPosY),a=parseInt(0)+","+parseInt(r),o=parseInt(e)+","+parseInt(r),preferences.allowPerpendicular&&randomAllow()&&(e=getRandomArbitrary(0,maxArtboardPosX),a=parseInt(e)+","+parseInt(0),o=parseInt(e)+","+parseInt(maxArtboardPosY)),t="M "+a,t=t+" L "+o,preferences.allowTransparency)var l=getRandomArbitrary(.25,1);var i=getRandomArbitrary(1,3),c=paper.path(t).attr({stroke:getColor(),"stroke-width":i,"fill-opacity":l});preferences.allowRotation&&(c=c.transform("r"+s+" s2"))}function randomAllow(){var e=Math.random()<.5?0:1;return 1==e}function generateColorArray(e){var r=[];for(k=0;k<e;k++)r[k]=getRandomColor();return r}function getColor(){var e=preferences.allowedColors[Math.floor(Math.random()*preferences.allowedColors.length)];return e}function saveSVG(){var e=document.getElementById("art-board").innerHTML;a=document.createElement("a"),a.download="artsyfartsiness.svg",a.type="image/svg+xml",blob=new Blob([e],{type:"image/svg+xml"}),a.href=(window.URL||webkitURL).createObjectURL(blob),a.click()}function downloadJPG(){var e=document.getElementById("art-board").childNodes[0];saveSvgAsPng(e,"diagram.png")}function showHideNextElement(e){$("#"+$(e).attr("data-toggles")).toggleClass("actionable")}function updateCanvasDimention(){var e=$("#deviceType").val();switch(e){case"iphone5":setCanvasUI(320,568,2);break;case"iphone6":setCanvasUI(375,627,2);break;case"iphone6p":setCanvasUI(414,736,2);break;case"nexus5":setCanvasUI(360,567,3);break;case"nexus6":setCanvasUI(412,659,3.5);break;case"nexus7":setCanvasUI(600,950,2);break;case"ipad":setCanvasUI(768,1024,2);break;case"macbook":setCanvasUI(1440,900,2);break;case"thunder":setCanvasUI(2560,1440,1);break;case"generic":setCanvasUI(1440,900,1);break;default:setCanvasUI(600,600,1)}}function setCanvasUI(e,r,a){$("#maxWidth").val(e),$("#maxHeight").val(r),$("#retinaValue").val(a)}var maxArtboardPosX=800,maxArtboardPosY=600,paper,preferences,globalAngle,retina=1;$(document).ready(function(){paper=Raphael("art-board",maxArtboardPosX,maxArtboardPosY),$("#generate").on("click",function(){return preferences=getPreferences(),resizeArtboard(preferences.maxWidth,preferences.maxHeight),generateShapes(preferences.numberShapes),!1}),$("#save").on("click",function(){saveSVG()}),$("#download").on("click",function(){downloadJPG()}),$("#addColor").on("click",function(){var e=$("#colorSet").val();""!=e?$("#colorSet").val(e+","+$("#colorChooser").val()):$("#colorSet").val($("#colorChooser").val())}),$("#useColorSet, #useBackgroundColor").on("change",function(){showHideNextElement(this)}),$("#deviceType").on("change",function(){updateCanvasDimention()})});