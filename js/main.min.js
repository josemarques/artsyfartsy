function resizeArtboard(r,e){maxArtboardPosX=1.5*r,maxArtboardPosY=1.5*e,paper.setSize(r,e)}function drawBackground(){var r=1;preferences.allowTransparency&&(r=getRandomArbitrary(.1,1));var e=paper.rect(0,0,preferences.maxWidth,preferences.maxHeight).attr({fill:getColor(),"stroke-width":0,"fill-opacity":r})}function getPreferences(){var r={};switch(r.maxWidth=$("#maxWidth").val(),r.maxHeight=$("#maxHeight").val(),r.numberShapes=$("#numberShapes").val(),r.numberColors=$("#numberColors").val(),r.allowRotation=$("#allowRotation").prop("checked"),r.persistentAngle=$("#persistentAngle").prop("checked"),r.allowPerpendicular=$("#allowPerpendicular").prop("checked"),r.allowTransparency=$("#allowTransparency").prop("checked"),r.allowRoundCorners=$("#allowRoundCorners").prop("checked"),r.objectSize=$("#objectSize").val(),r.objectSize){case"xl":r.objectSize=1;break;case"l":r.objectSize=.5;break;case"m":r.objectSize=.25;break;case"s":r.objectSize=.1;break;case"xs":r.objectSize=.05}return r.allowedShapes=$("#allowedShapes:checked").map(function(){return $(this).val()}).toArray(),r.allowedColors=generateColorArray(r.numberColors),r}function generateShapes(r){paper.clear(),drawBackground();var e="rectangle";for(globalAngle=parseInt(getRandomArbitrary(0,360)),i=1;i<=r;i++)e=preferences.allowedShapes[Math.floor(Math.random()*preferences.allowedShapes.length)],"circle"==e?drawCircle():"triangle"==e?drawTriangle():"polygon"==e?drawPolygon():"line"==e?drawLine():drawRectangle()}function getRandomColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function getRandomArbitrary(r,e,a){var t=Math.random()*(e-r)+r;return null!=a&&(t*=Math.random()<.5?-1:1),t}function drawRectangle(){var r=getRandomArbitrary(-.5*maxArtboardPosX,maxArtboardPosX+10),e=getRandomArbitrary(-.5*maxArtboardPosY,maxArtboardPosY+10),a=getRandomArbitrary(0,preferences.maxWidth),t=getRandomArbitrary(0,preferences.maxHeight),o=0,n=0,l=1;preferences.allowRoundCorners&&(n=getRandomArbitrary(0,a>t?a:t)),preferences.allowTransparency&&(l=getRandomArbitrary(.1,1));var s=paper.rect(r,e,a,t).attr({fill:getColor(),"stroke-width":0,"fill-opacity":l,radius:n});preferences.allowRotation&&randomAllow?(o=preferences.persistentAngle?globalAngle:getRandomArbitrary(0,360),s=s.transform("r"+o+" s"+preferences.objectSize)):s.transform("s"+preferences.objectSize)}function drawCircle(){var r=getRandomArbitrary(0,maxArtboardPosX,!0),e=getRandomArbitrary(0,maxArtboardPosY,!0),a=getRandomArbitrary(0,preferences.maxWidth);preferences.allowTransparency&&(opacity=getRandomArbitrary(0,1));var t=paper.circle(r,e,a).attr({fill:getColor(),"stroke-width":0,"fill-opacity":opacity});t.transform("s"+preferences.objectSize)}function drawPolygon(r){var e,a,t,o,n=1;for(null==r&&(r=parseInt(getRandomArbitrary(3,9))),j=0;j<r;j++)e=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosX,!0),a=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosY,!0),t=parseInt(e)+","+parseInt(a),null!=o?o+=" L "+t:o="M "+t;if(preferences.allowTransparency)var n=getRandomArbitrary(0,1);var l=paper.path(o).attr({fill:getColor(),"stroke-width":0,"fill-opacity":n});l.transform("s"+preferences.objectSize)}function drawTriangle(){var r,e,a,t,o,n,l,s;if(l=getRandomArbitrary(0,preferences.maxWidth)*preferences.objectSize,s=getRandomArbitrary(0,preferences.maxHeight)*preferences.objectSize,r=getRandomArbitrary(0,maxArtboardPosX),a=getRandomArbitrary(0,maxArtboardPosY),o=getRandomArbitrary(10,l>s?l:s),e=r+o,triangleString="M "+parseInt(r)+","+parseInt(a)+"L "+parseInt(e)+","+parseInt(a)+"L "+parseInt(r+o/2)+","+parseInt(a+o/1.5),preferences.allowTransparency)var i=getRandomArbitrary(0,1);console.log("triangle: "+triangleString);var c=paper.path(triangleString).attr({fill:getColor(),"stroke-width":0,"fill-opacity":i});preferences.persistentAngle?c.transform("r"+globalAngle):preferences.allowRotation?c.transform("r"+parseInt(getRandomArbitrary(0,360))):(angle=45*parseInt(getRandomArbitrary(0,6)),c.transform("r"+angle))}function drawLine(){var r,e,a,t,o,n,l,s=1,l=0;if(l=preferences.persistentAngle&&0!=globalAngle?globalAngle:parseInt(getRandomArbitrary(0,360)),r=maxArtboardPosX>maxArtboardPosY?maxArtboardPosX:maxArtboardPosY,e=getRandomArbitrary(0,maxArtboardPosY),a=parseInt(0)+","+parseInt(e),t=parseInt(r)+","+parseInt(e),preferences.allowPerpendicular&&randomAllow()&&(r=getRandomArbitrary(0,maxArtboardPosX),a=parseInt(r)+","+parseInt(0),t=parseInt(r)+","+parseInt(maxArtboardPosY)),o="M "+a,o=o+" L "+t,preferences.allowTransparency)var s=getRandomArbitrary(0,1);var i=getRandomArbitrary(1,3),c=paper.path(o).attr({stroke:getColor(),"stroke-width":i,"fill-opacity":s});preferences.allowRotation&&(c=c.transform("r"+l+" s2"))}function randomAllow(){var r=Math.random()<.5?0:1;return 1==r}function generateColorArray(r){var e=[];for(k=0;k<r;k++)e[k]=getRandomColor();return console.log(e),e}function getColor(){var r=preferences.allowedColors[Math.floor(Math.random()*preferences.allowedColors.length)];return r}var maxArtboardPosX=800,maxArtboardPosY=600,paper,preferences,globalAngle;$(document).ready(function(){paper=Raphael("art-board",maxArtboardPosX,maxArtboardPosY),$("#generate").on("click",function(){return preferences=getPreferences(),resizeArtboard(preferences.maxWidth,preferences.maxHeight),generateShapes(preferences.numberShapes),!1}),$("#save").on("click",function(){var r=document.getElementById("art-board").innerHTML;a=document.createElement("a"),a.download="mySvg.svg",a.type="image/svg+xml",blob=new Blob([r],{type:"image/svg+xml"}),a.href=(window.URL||webkitURL).createObjectURL(blob),a.click()})});