function getPreferences(){var e={};switch(e.retina=$("#retinaValue").val(),e.maxWidth=$("#maxWidth").val()*e.retina,e.maxHeight=$("#maxHeight").val()*e.retina,e.numberShapes=$("#numberShapes").val(),e.numberColors=$("#numberColors").val(),e.allowRotation=$("#allowRotation").prop("checked"),e.persistentAngle=$("#persistentAngle").prop("checked"),e.allowPerpendicular=$("#allowPerpendicular").prop("checked"),e.allowTransparency=$("#allowTransparency").prop("checked"),e.allowRoundCorners=$("#allowRoundCorners").prop("checked"),e.objectSize=$("#objectSize").val(),e.useBackgroundColor=$("#useBackgroundColor").prop("checked"),e.backgroundColor=$("#backgroundColor").val(),e.useColorSet=$("#useColorSet").prop("checked"),e.colorSet=$("#colorSet").val(),e.fillingtype=$("#fillingtype").val(),e.allowDistictColors=$("#allowDistict").val(),e.strokeWidth=$("#strokeWidth").val(),e.objectSize){case"xl":e.objectSize=.75;break;case"l":e.objectSize=.5;break;case"m":e.objectSize=.25;break;case"s":e.objectSize=.1;break;case"xs":e.objectSize=.05}return e.allowedShapes=$("#allowedShapes:checked").map(function(){return $(this).val()}).toArray(),e.useColorSet?e.allowedColors=e.colorSet.split(","):e.allowedColors=generateColorArray(e.numberColors),e}function resizeArtboard(e,r){maxArtboardPosX=e,maxArtboardPosY=r,paper.setSize(maxArtboardPosX,maxArtboardPosY)}function drawBackground(){var e=1,r=preferences.useBackgroundColor?preferences.backgroundColor:getColor(),a=paper.rect(0,0,preferences.maxWidth,preferences.maxHeight).attr({fill:r,strokeWidth:0})}function generateShapes(e){paper.clear(),drawBackground();var r="rectangle";for(globalAngle=parseInt(getRandomArbitrary(0,360)),i=1;i<=e;i++)shapeProperties=setShapeProperties(),"circle"==shapeProperties.shapeType?drawCircle():"triangle"==shapeProperties.shapeType?drawTriangle():"polygon"==shapeProperties.shapeType?drawPolygon():"line"==shapeProperties.shapeType?drawLine():drawRectangle()}function setShapeProperties(){return shapeProperties.fillColor=getColor(),shapeProperties.strokeOpacity=getRandomArbitrary(.25,1),shapeProperties.fillOpacity=getRandomArbitrary(.25,1),preferences.allowDistictColors?shapeProperties.strokeColor=getColor():shapeProperties.strokeColor=shapeProperties.fillColor,preferences.allowTransparency&&(shapeProperties.fillOpacity=getRandomArbitrary(.25,1)),"random"==preferences.strokeWidth?shapeProperties.strokeWidth=getRandomArbitrary(1,maxStrokeWidth):shapeProperties.strokeWidth=preferences.strokeWidth,"border"==preferences.fillingtype?shapeProperties.fillOpacity=0:"filling"==preferences.fillingtype&&(shapeProperties.strokeWidth=0),shapeProperties.shapeType=preferences.allowedShapes[Math.floor(Math.random()*preferences.allowedShapes.length)],console.log("shapeProperties.strokeWidth "+shapeProperties.strokeWidth),shapeProperties}function getRandomColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function getRandomArbitrary(e,r,a){var o=Math.random()*(r-e)+e;return null!=a&&(o*=Math.random()<.5?-1:1),o}function drawRectangle(){var e=getRandomArbitrary(-.5*maxArtboardPosX,maxArtboardPosX+10),r=getRandomArbitrary(-.5*maxArtboardPosY,maxArtboardPosY+10),a=getRandomArbitrary(0,preferences.maxWidth),o=getRandomArbitrary(0,preferences.maxHeight),t=0,s=0;preferences.allowRoundCorners&&(s=getRandomArbitrary(0,a>o?a:o));var n=paper.rect(e,r,a,o).attr({"stroke-width":shapeProperties.strokeWidth,stroke:shapeProperties.strokeColor,"stroke-opacity":shapeProperties.strokeOpacity,fill:shapeProperties.fillColor,"fill-opacity":shapeProperties.fillOpacity,radius:s});preferences.allowRotation&&randomAllow?(t=preferences.persistentAngle?globalAngle:getRandomArbitrary(0,360),n=n.transform("r"+t+" s"+preferences.objectSize)):n.transform("s"+preferences.objectSize)}function drawCircle(){var e=getRandomArbitrary(0,maxArtboardPosX,!0),r=getRandomArbitrary(0,maxArtboardPosY,!0),a=getRandomArbitrary(0,preferences.maxWidth),o=paper.circle(e,r,a).attr({"stroke-width":shapeProperties.strokeWidth,stroke:shapeProperties.strokeColor,"stroke-opacity":shapeProperties.strokeOpacity,fill:shapeProperties.fillColor,"fill-opacity":shapeProperties.fillOpacity});o.transform("s"+preferences.objectSize)}function drawPolygon(e){var r,a,o,t;for(null==e&&(e=parseInt(getRandomArbitrary(3,5))),x1=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosX,!0),y1=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosY,!0),firstPoint=parseInt(x1)+","+parseInt(y1),t="M "+firstPoint,j=0;j<e;j++)r=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosX,!0),a=getRandomArbitrary(-.5*maxArtboardPosX,3*maxArtboardPosY,!0),o=parseInt(r)+","+parseInt(a),t+=" L "+o;t+=" L "+firstPoint;var s=paper.path(t).attr({"stroke-width":shapeProperties.strokeWidth,stroke:shapeProperties.strokeColor,"stroke-opacity":shapeProperties.strokeOpacity,fill:shapeProperties.fillColor,"fill-opacity":shapeProperties.fillOpacity});s.transform("s"+preferences.objectSize/2)}function drawTriangle(){var e,r,a,o,t,s,n,i;n=getRandomArbitrary(0,preferences.maxWidth)*preferences.objectSize,i=getRandomArbitrary(0,preferences.maxHeight)*preferences.objectSize,e=getRandomArbitrary(0,maxArtboardPosX),a=getRandomArbitrary(0,maxArtboardPosY),t=getRandomArbitrary(10,n>i?n:i),r=e+t,triangleString="M "+parseInt(e)+","+parseInt(a)+"L "+parseInt(r)+","+parseInt(a)+"L "+parseInt(e+t/2)+","+parseInt(a+t/1.5)+"L "+parseInt(e)+","+parseInt(a);var l=paper.path(triangleString).attr({"stroke-width":shapeProperties.strokeWidth,stroke:shapeProperties.strokeColor,"stroke-opacity":shapeProperties.strokeOpacity,fill:shapeProperties.fillColor,"fill-opacity":shapeProperties.fillOpacity});preferences.persistentAngle?l.transform("r"+globalAngle):preferences.allowRotation?l.transform("r"+parseInt(getRandomArbitrary(0,360))):(angle=45*parseInt(getRandomArbitrary(0,6)),l.transform("r"+angle))}function drawLine(){var e,r,a,o,t,s,n,i=1,n=0;if(n=preferences.persistentAngle&&0!=globalAngle?globalAngle:parseInt(getRandomArbitrary(0,360)),e=maxArtboardPosX>maxArtboardPosY?maxArtboardPosX:maxArtboardPosY,r=getRandomArbitrary(0,maxArtboardPosY),a=parseInt(0)+","+parseInt(r),o=parseInt(e)+","+parseInt(r),preferences.allowPerpendicular&&randomAllow()&&(e=getRandomArbitrary(0,maxArtboardPosX),a=parseInt(e)+","+parseInt(0),o=parseInt(e)+","+parseInt(maxArtboardPosY)),t="M "+a,t=t+" L "+o,preferences.allowTransparency)var i=getRandomArbitrary(.25,1);var l=getRandomArbitrary(1,3),p=paper.path(t).attr({"stroke-width":shapeProperties.strokeWidth,stroke:shapeProperties.strokeColor,"fill-opacity":shapeProperties.fillOpacity});preferences.allowRotation&&(p=p.transform("r"+n+" s2"))}function randomAllow(){var e=Math.random()<.5?0:1;return 1==e}function generateColorArray(e){var r=[],a="";for(k=0;k<e;k++)r[k]=getRandomColor(),a+=" "+r[k];return console.log("Colors used: "+a),r}function getColor(){var e=preferences.allowedColors[Math.floor(Math.random()*preferences.allowedColors.length)];return e}function saveSVG(){var e=document.getElementById("art-board").innerHTML;a=document.createElement("a"),a.download="artsyfartsiness.svg",a.type="image/svg+xml",blob=new Blob([e],{type:"image/svg+xml"}),a.href=(window.URL||webkitURL).createObjectURL(blob),a.click()}function downloadJPG(){var e=document.getElementById("art-board").childNodes[0];saveSvgAsPng(e,"diagram.png")}function showHideNextElement(e){$("#"+$(e).attr("data-toggles")).toggleClass("actionable")}function updateCanvasDimention(){var e=$("#deviceType").val();switch(e){case"iphone5":setCanvasUI(320,568,2);break;case"iphone6":setCanvasUI(375,627,2);break;case"iphone6p":setCanvasUI(414,736,2);break;case"nexus5":setCanvasUI(360,567,3);break;case"nexus6":setCanvasUI(412,659,3.5);break;case"nexus7":setCanvasUI(600,950,2);break;case"ipad":setCanvasUI(768,1024,2);break;case"macbook":setCanvasUI(1440,900,2);break;case"thunder":setCanvasUI(2560,1440,1);break;case"generic":setCanvasUI(1440,900,1);break;default:setCanvasUI(600,600,1)}}function setCanvasUI(e,r,a){$("#maxWidth").val(e),$("#maxHeight").val(r),$("#retinaValue").val(a)}var maxArtboardPosX=800,maxArtboardPosY=600,maxStrokeWidth=10,paper,preferences,globalAngle,retina=1,strokeWidth=1,shapeProperties={};shapeProperties.strokeWidth=0,shapeProperties.strokeOpacity=1,shapeProperties.strokeColor="",shapeProperties.fillOpacity=1,shapeProperties.fillColor="",$(document).ready(function(){paper=Raphael("art-board",maxArtboardPosX,maxArtboardPosY),$("#generate").on("click",function(){return preferences=getPreferences(),resizeArtboard(preferences.maxWidth,preferences.maxHeight),generateShapes(preferences.numberShapes),!1}),$("#save").on("click",function(){saveSVG()}),$("#download").on("click",function(){downloadJPG()}),$("#addColor").on("click",function(){var e=$("#colorSet").val();""!=e?$("#colorSet").val(e+","+$("#colorChooser").val()):$("#colorSet").val($("#colorChooser").val())}),$("#useColorSet, #useBackgroundColor").on("change",function(){showHideNextElement(this)}),$("#deviceType").on("change",function(){updateCanvasDimention()})});